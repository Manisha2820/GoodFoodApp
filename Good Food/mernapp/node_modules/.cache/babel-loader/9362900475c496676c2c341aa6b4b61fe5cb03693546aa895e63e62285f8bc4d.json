{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/erman/Downloads/capstone project/Good Food/mernapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/erman/Downloads/capstone project/Good Food/mernapp/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/erman/Downloads/capstone project/Good Food/mernapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/erman/Downloads/capstone project/Good Food/mernapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatchCart,useCart}from\"./ContextReducer\";// import { Dropdown, DropdownButton } from 'react-bootstrap';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){console.log(\" Props Value: \"+props);var data=useCart();var navigate=useNavigate();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),size=_useState4[0],setSize=_useState4[1];var priceRef=useRef();// const [btnEnable, setBtnEnable] = useState(false);\n// let totval = 0\n// let price = Object.values(options).map((value) => {\n//   return parseInt(value, 10);\n// });\nvar options=props.options;var priceOptions=Object.keys(options);var foodItem=props.item;console.log(\"Image::\"+props.ImgSrc);var dispatch=useDispatchCart();var handleClick=function handleClick(){if(!localStorage.getItem(\"token\")){navigate(\"/login\");}};var handleQty=function handleQty(e){setQty(e.target.value);};var handleOptions=function handleOptions(e){setSize(e.target.value);};var handleAddToCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var food,_iterator,_step,item;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:food=[];_iterator=_createForOfIteratorHelper(data);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=11;break;}item=_step.value;if(!(item.id===foodItem._id)){_context.next=9;break;}food=item;return _context.abrupt(\"break\",11);case 9:_context.next=4;break;case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);_iterator.e(_context.t0);case 16:_context.prev=16;_iterator.f();return _context.finish(16);case 19:console.log(food);console.log(new Date());if(!(food!=[])){_context.next=34;break;}if(!(food.size===size)){_context.next=28;break;}_context.next=25;return dispatch({type:\"UPDATE\",id:foodItem._id,price:finalPrice,qty:qty});case 25:return _context.abrupt(\"return\");case 28:if(!(food.size!==size)){_context.next=33;break;}_context.next=31;return dispatch({type:\"ADD\",id:foodItem._id,name:foodItem.name,price:finalPrice,qty:qty,size:size,img:props.ImgSrc});case 31:console.log(\"Size different so simply ADD one more to the list\");return _context.abrupt(\"return\");case 33:return _context.abrupt(\"return\");case 34:_context.next=36;return dispatch({type:\"ADD\",id:foodItem._id,name:foodItem.name,price:finalPrice,qty:qty,size:size});case 36:case\"end\":return _context.stop();}},_callee,null,[[2,13,16,19]]);}));return function handleAddToCart(){return _ref.apply(this,arguments);};}();useEffect(function(){setSize(priceRef.current.value);},[]);// useEffect(()=>{\n// checkBtn();\n//   },[data])\nvar finalPrice=qty*parseInt(options[size]);//This is where Price is changing\n// totval += finalPrice;\n// console.log(totval)\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"16rem\",maxHeight:\"360px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.ImgSrc,className:\"card-img-top\",alt:\"...\",style:{height:\"120px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodName}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100 p-0\",style:{height:\"38px\"},children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 w-20 bg-success text-black rounded\",style:{select:\"#FF0000\"},onClick:handleClick,onChange:handleQty,children:Array.from(Array(6),function(e,i){return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 w-20 bg-success text-black rounded\",style:{select:\"#FF0000\"},ref:priceRef,onClick:handleClick,onChange:handleOptions,children:priceOptions.map(function(i){return/*#__PURE__*/_jsx(\"option\",{value:i,children:i},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\" d-inline ms-2 h-100 w-20 fs-5\",children:[\"\\u20B9\",finalPrice,\"/-\"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success justify-center ms-2 \",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})});}//","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useDispatchCart","useCart","jsx","_jsx","jsxs","_jsxs","Card","props","console","log","data","navigate","_useState","_useState2","_slicedToArray","qty","setQty","_useState3","_useState4","size","setSize","priceRef","options","priceOptions","Object","keys","foodItem","item","ImgSrc","dispatch","handleClick","localStorage","getItem","handleQty","e","target","value","handleOptions","handleAddToCart","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","food","_iterator","_step","wrap","_callee$","_context","prev","next","_createForOfIteratorHelper","s","n","done","id","_id","abrupt","t0","f","finish","Date","type","price","finalPrice","name","img","stop","apply","arguments","current","parseInt","children","className","style","width","maxHeight","src","alt","height","objectFit","foodName","select","onClick","onChange","Array","from","i","ref","map"],"sources":["C:/Users/erman/Downloads/capstone project/Good Food/mernapp/src/components/Card.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatchCart, useCart } from \"./ContextReducer\";\r\n// import { Dropdown, DropdownButton } from 'react-bootstrap';\r\nexport default function Card(props) {\r\n  console.log(\" Props Value: \" + props);\r\n  let data = useCart();\r\n\r\n  let navigate = useNavigate();\r\n  const [qty, setQty] = useState(1);\r\n  const [size, setSize] = useState(\"\");\r\n  const priceRef = useRef();\r\n  // const [btnEnable, setBtnEnable] = useState(false);\r\n  // let totval = 0\r\n  // let price = Object.values(options).map((value) => {\r\n  //   return parseInt(value, 10);\r\n  // });\r\n  let options = props.options;\r\n  let priceOptions = Object.keys(options);\r\n  let foodItem = props.item;\r\n  console.log(\"Image::\" + props.ImgSrc);\r\n  const dispatch = useDispatchCart();\r\n  const handleClick = () => {\r\n    if (!localStorage.getItem(\"token\")) {\r\n      navigate(\"/login\");\r\n    }\r\n  };\r\n  const handleQty = (e) => {\r\n    setQty(e.target.value);\r\n  };\r\n  const handleOptions = (e) => {\r\n    setSize(e.target.value);\r\n  };\r\n  const handleAddToCart = async () => {\r\n    let food = [];\r\n    for (const item of data) {\r\n      if (item.id === foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n    console.log(food);\r\n    console.log(new Date());\r\n    if (food != []) {\r\n      if (food.size === size) {\r\n        await dispatch({\r\n          type: \"UPDATE\",\r\n          id: foodItem._id,\r\n          price: finalPrice,\r\n          qty: qty,\r\n        });\r\n        return;\r\n      } else if (food.size !== size) {\r\n        await dispatch({\r\n          type: \"ADD\",\r\n          id: foodItem._id,\r\n          name: foodItem.name,\r\n          price: finalPrice,\r\n          qty: qty,\r\n          size: size,\r\n          img: props.ImgSrc,\r\n        });\r\n        console.log(\"Size different so simply ADD one more to the list\");\r\n        return;\r\n      }\r\n      return;\r\n    }\r\n\r\n    await dispatch({\r\n      type: \"ADD\",\r\n      id: foodItem._id,\r\n      name: foodItem.name,\r\n      price: finalPrice,\r\n      qty: qty,\r\n      size: size,\r\n    });\r\n\r\n    // setBtnEnable(true)\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value);\r\n  }, []);\r\n\r\n  // useEffect(()=>{\r\n  // checkBtn();\r\n  //   },[data])\r\n\r\n  let finalPrice = qty * parseInt(options[size]); //This is where Price is changing\r\n  // totval += finalPrice;\r\n  // console.log(totval)\r\n  return (\r\n    <div>\r\n      <div className=\"card mt-3\" style={{ width: \"16rem\", maxHeight: \"360px\" }}>\r\n        <img\r\n          src={props.ImgSrc}\r\n          className=\"card-img-top\"\r\n          alt=\"...\"\r\n          style={{ height: \"120px\", objectFit: \"fill\" }}\r\n        />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{props.foodName}</h5>\r\n          {/* <p className=\"card-text\">This is some random text. This is description.</p> */}\r\n          <div className=\"container w-100 p-0\" style={{ height: \"38px\" }}>\r\n            <select\r\n              className=\"m-2 h-100 w-20 bg-success text-black rounded\"\r\n              style={{ select: \"#FF0000\" }}\r\n              onClick={handleClick}\r\n              onChange={handleQty}\r\n            >\r\n              {Array.from(Array(6), (e, i) => {\r\n                return (\r\n                  <option key={i + 1} value={i + 1}>\r\n                    {i + 1}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n            <select\r\n              className=\"m-2 h-100 w-20 bg-success text-black rounded\"\r\n              style={{ select: \"#FF0000\" }}\r\n              ref={priceRef}\r\n              onClick={handleClick}\r\n              onChange={handleOptions}\r\n            >\r\n              {priceOptions.map((i) => {\r\n                return (\r\n                  <option key={i} value={i}>\r\n                    {i}\r\n                  </option>\r\n                );\r\n              })}\r\n            </select>\r\n            <div className=\" d-inline ms-2 h-100 w-20 fs-5\">\r\n              ₹{finalPrice}/-\r\n            </div>\r\n          </div>\r\n          <hr></hr>\r\n          <button\r\n            className={`btn btn-success justify-center ms-2 `}\r\n            onClick={handleAddToCart}\r\n          >\r\n            Add to Cart\r\n          </button>\r\n          {/* <button className={`btn btn-danger justify-center ms-2 ${btnEnable ? \"\" : \"disabled\"}`} onClick={handleRemoveCart}>Remove</button> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n//\r\n"],"mappings":"4mBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,eAAe,CAAEC,OAAO,KAAQ,kBAAkB,CAC3D;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,cAAe,SAAS,CAAAC,IAAIA,CAACC,KAAK,CAAE,CAClCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAGF,KAAK,CAAC,CACrC,GAAI,CAAAG,IAAI,CAAGT,OAAO,CAAC,CAAC,CAEpB,GAAI,CAAAU,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC5B,IAAAa,SAAA,CAAsBhB,QAAQ,CAAC,CAAC,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1BG,GAAG,CAAAF,UAAA,IAAEG,MAAM,CAAAH,UAAA,IAClB,IAAAI,UAAA,CAAwBrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,GAAM,CAAAG,QAAQ,CAAGxB,MAAM,CAAC,CAAC,CACzB;AACA;AACA;AACA;AACA;AACA,GAAI,CAAAyB,OAAO,CAAGf,KAAK,CAACe,OAAO,CAC3B,GAAI,CAAAC,YAAY,CAAGC,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC,CACvC,GAAI,CAAAI,QAAQ,CAAGnB,KAAK,CAACoB,IAAI,CACzBnB,OAAO,CAACC,GAAG,CAAC,SAAS,CAAGF,KAAK,CAACqB,MAAM,CAAC,CACrC,GAAM,CAAAC,QAAQ,CAAG7B,eAAe,CAAC,CAAC,CAClC,GAAM,CAAA8B,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB,GAAI,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CAClCrB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CACD,GAAM,CAAAsB,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIC,CAAC,CAAK,CACvBlB,MAAM,CAACkB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACxB,CAAC,CACD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIH,CAAC,CAAK,CAC3Bd,OAAO,CAACc,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CACzB,CAAC,CACD,GAAM,CAAAE,eAAe,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,IAAA,CAAAC,SAAA,CAAAC,KAAA,CAAAnB,IAAA,QAAAc,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAClBP,IAAI,CAAG,EAAE,CAAAC,SAAA,CAAAO,0BAAA,CACM1C,IAAI,EAAAuC,QAAA,CAAAC,IAAA,GAAAL,SAAA,CAAAQ,CAAA,cAAAP,KAAA,CAAAD,SAAA,CAAAS,CAAA,IAAAC,IAAA,EAAAN,QAAA,CAAAE,IAAA,WAAZxB,IAAI,CAAAmB,KAAA,CAAAV,KAAA,MACTT,IAAI,CAAC6B,EAAE,GAAK9B,QAAQ,CAAC+B,GAAG,GAAAR,QAAA,CAAAE,IAAA,UAC1BP,IAAI,CAAGjB,IAAI,CAAC,OAAAsB,QAAA,CAAAS,MAAA,oBAAAT,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAAAJ,SAAA,CAAAX,CAAA,CAAAe,QAAA,CAAAU,EAAA,UAAAV,QAAA,CAAAC,IAAA,IAAAL,SAAA,CAAAe,CAAA,UAAAX,QAAA,CAAAY,MAAA,aAKhBrD,OAAO,CAACC,GAAG,CAACmC,IAAI,CAAC,CACjBpC,OAAO,CAACC,GAAG,CAAC,GAAI,CAAAqD,IAAI,CAAC,CAAC,CAAC,CAAC,KACpBlB,IAAI,EAAI,EAAE,GAAAK,QAAA,CAAAE,IAAA,gBACRP,IAAI,CAACzB,IAAI,GAAKA,IAAI,GAAA8B,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UACd,CAAAtB,QAAQ,CAAC,CACbkC,IAAI,CAAE,QAAQ,CACdP,EAAE,CAAE9B,QAAQ,CAAC+B,GAAG,CAChBO,KAAK,CAAEC,UAAU,CACjBlD,GAAG,CAAEA,GACP,CAAC,CAAC,gBAAAkC,QAAA,CAAAS,MAAA,wBAEOd,IAAI,CAACzB,IAAI,GAAKA,IAAI,GAAA8B,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UACrB,CAAAtB,QAAQ,CAAC,CACbkC,IAAI,CAAE,KAAK,CACXP,EAAE,CAAE9B,QAAQ,CAAC+B,GAAG,CAChBS,IAAI,CAAExC,QAAQ,CAACwC,IAAI,CACnBF,KAAK,CAAEC,UAAU,CACjBlD,GAAG,CAAEA,GAAG,CACRI,IAAI,CAAEA,IAAI,CACVgD,GAAG,CAAE5D,KAAK,CAACqB,MACb,CAAC,CAAC,SACFpB,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC,CAAC,OAAAwC,QAAA,CAAAS,MAAA,0BAAAT,QAAA,CAAAS,MAAA,mBAAAT,QAAA,CAAAE,IAAA,UAM/D,CAAAtB,QAAQ,CAAC,CACbkC,IAAI,CAAE,KAAK,CACXP,EAAE,CAAE9B,QAAQ,CAAC+B,GAAG,CAChBS,IAAI,CAAExC,QAAQ,CAACwC,IAAI,CACnBF,KAAK,CAAEC,UAAU,CACjBlD,GAAG,CAAEA,GAAG,CACRI,IAAI,CAAEA,IACR,CAAC,CAAC,0BAAA8B,QAAA,CAAAmB,IAAA,MAAAzB,OAAA,uBAGH,kBA9CK,CAAAL,eAAeA,CAAA,SAAAC,IAAA,CAAA8B,KAAA,MAAAC,SAAA,OA8CpB,CAEDxE,SAAS,CAAC,UAAM,CACdsB,OAAO,CAACC,QAAQ,CAACkD,OAAO,CAACnC,KAAK,CAAC,CACjC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA;AACA;AAEA,GAAI,CAAA6B,UAAU,CAAGlD,GAAG,CAAGyD,QAAQ,CAAClD,OAAO,CAACH,IAAI,CAAC,CAAC,CAAE;AAChD;AACA;AACA,mBACEhB,IAAA,QAAAsE,QAAA,cACEpE,KAAA,QAAKqE,SAAS,CAAC,WAAW,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAO,CAAEC,SAAS,CAAE,OAAQ,CAAE,CAAAJ,QAAA,eACvEtE,IAAA,QACE2E,GAAG,CAAEvE,KAAK,CAACqB,MAAO,CAClB8C,SAAS,CAAC,cAAc,CACxBK,GAAG,CAAC,KAAK,CACTJ,KAAK,CAAE,CAAEK,MAAM,CAAE,OAAO,CAAEC,SAAS,CAAE,MAAO,CAAE,CAC/C,CAAC,cACF5E,KAAA,QAAKqE,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBtE,IAAA,OAAIuE,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAElE,KAAK,CAAC2E,QAAQ,CAAK,CAAC,cAEhD7E,KAAA,QAAKqE,SAAS,CAAC,qBAAqB,CAACC,KAAK,CAAE,CAAEK,MAAM,CAAE,MAAO,CAAE,CAAAP,QAAA,eAC7DtE,IAAA,WACEuE,SAAS,CAAC,8CAA8C,CACxDC,KAAK,CAAE,CAAEQ,MAAM,CAAE,SAAU,CAAE,CAC7BC,OAAO,CAAEtD,WAAY,CACrBuD,QAAQ,CAAEpD,SAAU,CAAAwC,QAAA,CAEnBa,KAAK,CAACC,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAAE,SAACpD,CAAC,CAAEsD,CAAC,CAAK,CAC9B,mBACErF,IAAA,WAAoBiC,KAAK,CAAEoD,CAAC,CAAG,CAAE,CAAAf,QAAA,CAC9Be,CAAC,CAAG,CAAC,EADKA,CAAC,CAAG,CAET,CAAC,CAEb,CAAC,CAAC,CACI,CAAC,cACTrF,IAAA,WACEuE,SAAS,CAAC,8CAA8C,CACxDC,KAAK,CAAE,CAAEQ,MAAM,CAAE,SAAU,CAAE,CAC7BM,GAAG,CAAEpE,QAAS,CACd+D,OAAO,CAAEtD,WAAY,CACrBuD,QAAQ,CAAEhD,aAAc,CAAAoC,QAAA,CAEvBlD,YAAY,CAACmE,GAAG,CAAC,SAACF,CAAC,CAAK,CACvB,mBACErF,IAAA,WAAgBiC,KAAK,CAAEoD,CAAE,CAAAf,QAAA,CACtBe,CAAC,EADSA,CAEL,CAAC,CAEb,CAAC,CAAC,CACI,CAAC,cACTnF,KAAA,QAAKqE,SAAS,CAAC,gCAAgC,CAAAD,QAAA,EAAC,QAC7C,CAACR,UAAU,CAAC,IACf,EAAK,CAAC,EACH,CAAC,cACN9D,IAAA,QAAQ,CAAC,cACTA,IAAA,WACEuE,SAAS,uCAAyC,CAClDU,OAAO,CAAE9C,eAAgB,CAAAmC,QAAA,CAC1B,aAED,CAAQ,CAAC,EAEN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}